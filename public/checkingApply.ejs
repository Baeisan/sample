<!doctype html>
<html>

<head>
  <meta charset="utf-8">
        <title>지원확인 페이지입니다.</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Site Description Here">
        <link href="/css/bootstrap.css" rel="stylesheet" type="text/css" media="all" />
        <link href="/css/stack-interface.css" rel="stylesheet" type="text/css" media="all" />
        <link href="/css/socicon.css" rel="stylesheet" type="text/css" media="all" />
        <link href="/css/lightbox.min.css" rel="stylesheet" type="text/css" media="all" />
        <link href="/css/flickity.css" rel="stylesheet" type="text/css" media="all" />
        <link href="/css/iconsmind.css" rel="stylesheet" type="text/css" media="all" />
        <link href="/css/jquery.steps.css" rel="stylesheet" type="text/css" media="all" />
        <link href="/css/theme.css" rel="stylesheet" type="text/css" media="all" />
        <link href="/css/custom.css" rel="stylesheet" type="text/css" media="all" />
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:200,300,400,400i,500,600,700%7CMerriweather:300,300i" rel="stylesheet">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body>

  <div class="main-container">
    <section class="text-center">
      <div class="container">
          <div class="row">
            <div class="col-sm-6">
              <label>학번:</label>
              <input type="number" name="studentnumber" id="userStudentnumber" required/>
              <button class="btn btn--primary" onClick="showApply();" style="width:20%;">지원확인</button>
            </div>
          </div>
      </div>
      <br /><br />
      <div class="container">
        <div class="col-md-8-cu">
          <div class="boxed boxed--lg boxed--border">
            <div id="showing"></div>
            <div class="col-sm-12" id="showing1"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script>
    function showApply(){
      axios.post('/check', {
        studentnumber: document.getElementById('userStudentnumber').value
      })
      .then(function(res){
        if(res.data.success == true){
        document.getElementById("showing").innerHTML =""
        document.getElementById("showing1").innerHTML =""
        var node = document.createElement("p");
        var node1 = document.createElement("p");
        var node2 = document.createElement("p");
        var node3 = document.createElement("p");
        var node4 = document.createElement("p");
        var form = document.createElement("form");
        var button = document.createElement("button");
        var textnode = document.createTextNode("이름: "+res.data.name);
        var textnode1 = document.createTextNode("학년: "+res.data.grade);
        var textnode2 = document.createTextNode("학과(부): "+res.data.major);
        var textnode3 = document.createTextNode("학번: "+res.data.studentnumber);
        var textnode4 = document.createTextNode("전화번호: "+res.data.phonenumber);
        var buttonText = document.createTextNode("창 닫기");
        node.appendChild(textnode);
        node1.appendChild(textnode1);
        node2.appendChild(textnode2);
        node3.appendChild(textnode3);
        node4.appendChild(textnode4);
        form.appendChild(button);
        form.setAttribute("action", "/closeWin");
        form.setAttribute("method", "post");
        button.appendChild(buttonText);
        button.setAttribute("type", "submit");
        button.setAttribute("class", "btn btn--primary");
        button.setAttribute("style", "width:50%;");
        document.getElementById("showing").appendChild(node);
        document.getElementById("showing").appendChild(node1);
        document.getElementById("showing").appendChild(node2);
        document.getElementById("showing").appendChild(node3);
        document.getElementById("showing").appendChild(node4);
        document.getElementById("showing1").appendChild(form);
      }else {
        document.getElementById("showing").innerHTML =""
        document.getElementById("showing1").innerHTML =""
        var node = document.createElement("p");
        var form = document.createElement("form");
        var button = document.createElement("button");
        var textnode = document.createTextNode("신청되지 않았습니다.");
        var buttonText = document.createTextNode("창 닫기");
        node.appendChild(textnode);
        form.appendChild(button);
        form.setAttribute("action", "/closeWin");
        form.setAttribute("method", "post");
        button.appendChild(buttonText);
        button.setAttribute("type", "submit");
        button.setAttribute("class", "btn btn--primary");
        button.setAttribute("style", "width:50%;");
        document.getElementById("showing").appendChild(node);
        document.getElementById("showing1").appendChild(form);
      }
      })
      .catch(function(err){
        console.log(err)
      });
    }
  </script>


</body>

</html>
